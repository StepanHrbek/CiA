
                       ฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐ
                      ฐฐฐฐ ฑฒ ฐฐ ฑฒ ฐฐฐ ฑฒ ฐฐฐฐฐฐฐฐฐฐฐ
                     ฐฐฐฐ ฑฒ ฐฐฐฐฐฐฐ ฑฒ ฐฐฐฐ ฑฒ ฐฐฐฐฐฐฐฐฐ
                    ฐฐฐฐ ฑฒ ฐฐฐฐฐฐฐ ฑฒ ฐฐฐฐ ฑฒ ฑฒ ฐฐฐฐฐฐฐ
                   ฐฐฐฐ ฑฒ ฐฐฐฐฐฐฐ ฑฒ ฐฐฐฐ ฑฒ ฐฐฐฐฐ
                  ฐฐฐฐ ฑฒ ฐฐฐฐฐฐฐ ฑฒ ฐฐฐฐ ฑฒ ฐฐฐ ฑฒ ฐฐฐ
                 ฐฐฐฐฐ ฑฒ ฐฐ ฑฒ ฐฐ ฑฒ ฐฐฐฐฐ ฑฒ ฐ     verze 0.50
                ฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐฐ
               ฐฐฐฐฐฐฐฐฐฐฐฐฐ Code It Again, Sam ฐฐฐฐฐฐฐฐ      23.rijen 1997

ีอออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออธ
ณ  Zakladni informace:                                                      ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู
  Jde o sadu pascalskych unit snazicich se pokryt nejnizsi vrstvu stavby
   programu (vga/svga, pamet, mys, klavesnice, scrolling...).
  Zdrojaky jsou urceny pro kompilaci Turbo/Borland Pascalem 7, pro DOS,
   pro realmod nebo protected mod, procesory od 386 vys. Lze je pouzivat
   i v DLL. Funkcnost v jinem prostredi neni zarucena.
  Ke zkompilovani jsou nutne unity standardne dodavane k Borland Pascalu 7.
  Tam kde zalezi na rychlosti je optimalizovano na rychlost na 386/486.
   V ostatnich pripadech na jednoduchost.
  V souborech priklad*.* je ukazka par zakladnich veci.
  Pokud je nekde cestina (chybove hlasky, fonty), je v kodovani Kamenickych.
  Prilozen je pouze jeden font, v proporcionalni a neproporcionalni verzi.
   Dalsich vice nez 30 ceskych fontu najdes v Masine (k dostani na strance
   www.ms.mff.cuni.cz/~shrb5163).


ีอออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออธ
ณ  Jak na to (rada pro zacatecniky)                                         ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู
  Porid si Borland Pascal 7 (na neco staci i Turbo Pascal, na neco ne).
   Spust BP, vlez do dialogu Options/Directories. Nastav Include Directories
   na adresar s CiA (treba \CIA). Nastav Unit Directories na CiA a na adresar
   se standardnimi Borlandimi unitami (treba \CIA;\BP\UNITS). Nastaveni uloz.
   Ted muzes zkusit spustit priklady dodavane k CiA.


ีอออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออธ
ณ  Poznamky k uprave zdrojaku:                                              ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู
  Popisy procedur a promennych jednou budou v helpu (*.TPH), zatim jsou
   roztrousene po zdrojacich takto:
   Hlavni komentar k unite je na zacatku, komentare k promennym a spol
   jsou u deklaraci, komentare k proceduram a spol u jejich tel.
  Unity v uses jsou razeny takto: Chyby, Memo, standardni Borlandi unity,
   ostatni unity.
  Metody jsou psany 'Procedure', neobjektove procedury vetsinou 'PROCEDURE'.
  Po upozorneni ze identifikatory obsahuji prilis mnoho ceskoanglickych
   slatanin dostava mirnou prednost anglictina.
  Je-li u procedury psano 'Nemeni registry' nemusi to platit na 100%.
   AX se zmeni je-li zapnuty stack checking a procedura pouziva stack
   (stack pouziva pokud ma parametry, lokalni promenne nebo je to metoda).
  Komentar {* oznacuje mista kde je neco nedodelane, v oficialnim releasu
   by se nemel prilis vyskytovat :).


ีอออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออธ
ณ  Popis unit:                                                              ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู
   UNITA   POPIS                  CO STOJI ZA POZORNOST

  Cache   cache pro objekty
  Chyby   sprava chyb
  DPMI    DPMI sluzby
  Fajly   disky, soubory, PCK
  Fonty   bitmapove fonty       -format FN
  INI     konfiguracni soubory  -format INI
  Key     handler klavesnice
  Memo    sprava pameti         -univerzalnost pro real i protekt, alokace
  Mys     sprava mysi             souvislych bloku 64KB a delsich
  Scrol   scrolling             -scrollovaci engine z Masiny/Pareniste
  Stringy prace se stringy        libovolny mod/libovolne velka bitmapa
  Sys     systemove drobnosti   -nahrada casti crt makry, presne mereni casu
  Texty   prace s texty v pameti
  Timer   synchronizace s paprskem
  VGA     vga, vesa, bitmapy    -univerzalnost pro vsechny podporovane mody,
                                   resi chyby nekterych karet a vesa biosu

   Podrobnejsi informace jsou v jednotlivych unitach.


ีอออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออธ
ณ  Popis ostatnich souboru:                                                 ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู
   SOUBOR         POPIS

  bit2scr.inc    dvojnasobny include k vga.pas
  define.inc     globalni nastaveni $define pro vsechny unity
  initdone.inc   standardni init/done include ke vsem unitam
  loadfile.inc   dvojnasobny include k fajly.pas
  modern.fn      ukazka fontu
  priklad*.*     ukazky prace s CIA...
  readme         dokumentace
  sbit2scr.inc   dvojnasobny include k scrol.pas
  timer.asm      vlastni kod unity timer
  timer.obj      zkompilovany timer.asm


ีอออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออธ
ณ  Co udelat pro spolupraci s Midasem:                                      ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู
  Zahod zdejsi unity DPMI a Timer, pouzij originalni midasovske. Maly rozdil,
   ktery si budes muset sam opravit, je pouze v recordu dpmiRealCallRegs.
  Na konec procedur midasError a midasUninitError dej Halt(erMsgWritten).
  Asi by sis mel opravit chyby v Midasu, viz clanek v Parenisti 28.
   S originalni Midasovskou unitou DPMI nemusi CiA fungovat.


ีอออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออธ
ณ  Jake vlastnosti TP/BP 7.0 mimo normu pascalu jsou pouzity (zneuzity) ?   ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู
  Vyhodnocovani vyrazu v urcitem poradi (pr: GetWord=GetByte shl 8+GetByte).
  Break zachovava ridici promennou cyklu.
  Ulozeni promennych v pameti v urcitem poradi, navaznosti.
  Predavani vysledku funkci v registrech.
  Ukoncovani procedur retem.
  Pro uplnost jeste: objekty, direktivy, asm...


ีอออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออธ
ณ  Dalsi vyvoj:                                                             ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู
  Nikdo neni dokonaly a zejmena tyto unity ne.
   Zde je prostor pro celou obec programatorskou,
   radi do unit zaclenime vase vylepseni, opravy atd.
  Jakekoliv komentare jsou vitany.
  Plany do budoucna
    - Help ve formatu TPH.
    - Loadery nejrozsirenejsich grafickych formatu.
    - Plna podpora Hi a TrueColor.
    - Filesystem umoznujici praci s WAD, ZIP apod jako s adresari.

   Ba ne, ted uprimne. Myslim, ze pascal je mrtvy jazyk. Prakticky nulova
   odezva na predchozi verze CiA me v tom utvrzuje. Proto tuto verzi
   povazuji za posledni. V pripade ze objevim nebo se dozvim o chybach,
   vydam jeste patch. Samozrejme nebranim v dalsim vyvoji komukoliv
   jinemu a v pripade potreby se zapojim.


ีอออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออธ
ณ  Historie/Novinky:                                                        ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู
  24.leden 1996 - napad, zacatek prace
  19.rijen 1996 - verze 0.10
   5.duben 1997 - verze 0.32
    -unita scrol (scrollovaci engine z Masiny), unita timer (podpora scrolu)
    -autodone ve vsech unitach, ShutDownInts v nekterych (pred kazdym
     ukoncenim programu probehnou retezy procedur ShutDownInts a ExitProc)
    -unita cache
    -postupny prechod od funkci vracejicich uspesnost jako boolean k funkcim
     vracejicim TError (kod chyby), kody jsou kompatibilni s Midasem
    -dynamicky tvoreny seznam chybovych hlasek (BugList)
    -mnoho dalsich zmen, oprav, optimalizaci, prostredi je o dost stabilnejsi
    -docasne vypusten fnt2fn.exe (pozn: fnt2fn z CiA 0.10 nemusi produkovat
     korektni fonty, pockej si na opravu)
  23.rijen 1997 - verze 0.50
    -dialogy
    -TScreen ma svuj GetEvent, pouzivej ho misto cteni z klavesnice a mysi.
    -TPalAlloc pro alokaci barev v palete, das mu RGB a on ti vrati index
    -fn.exe na praci s fonty
    -TText1 si uz hlida zacatek a konec textu
    -standardni prikaz Move je s CiA az 4x rychlejsi
    -opravene chyby
   Pri prechodu z verze 0.32 dej zvlast pozor na tyto nenapadne zmeny:
    -TScrolScreen.Done zrusi i listu, driv ji nechaval jen tak lezet v pameti
    -T(Scrol)Screen.Init(model,sirka,vyska,0) podle modelu dela toto:
      model_packed    - nastavi urcite packed
      model_unchained - nastavi urcite unchained
      model_256       - sam si vybere packed nebo unchained
     Driv mezi model_packed a model_unchained nerozlisoval a sam si vybiral.
    -TScreen.Sync cte klavesnici a stisky posila do eventbufferu, takze ted
     by "repeat s.Sync until keypressed" nikdy neskoncilo. Na prime cteni
     mysi a klavesnice zapomen, cti eventy pomoci GetEvent.
    -psDisk vraci jen pismeno disku bez dvojtecky
    -CallCommand nevraci DosError ale TError
    -Napsat dulezitou vec jen jednou je malo, tedy:
     Tvuj program by vubec nemel pouzivat unitu mys a funkce ReadKey,
     KeyPressed apod. Vse potrebne ti nabizi GetEvent a dalsi metody TScreen,
     pripadne TScrolScreen.


ีอออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออธ
ณ  Podminky:                                                                ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู
  Je zakazano pouzit C.I.A. zpusobem, ktery by nekoho materialne obohatil.
  Za nasledky pouziti C.I.A. nerucime.


ีอออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออธ
ณ  Autori:                                                                  ณ
ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู
  Dement          dement@bbs.infima.cz          kdeco
  Sahara Surfers  pekangas@sci.fi               dpmi, timer
  Jan Patera      xpatera1@br.fjfi.cvut.cz      hi+truecolor
  Erixon          sysop@foxone.fido.cz          disky, PCK
  ReDox           redox@bbs.infima.cz           nastaveni X-modu


 V pripade dalsiho vyvoje budou vzdy nejcerstvejsi informace na strance
 www.ms.mff.cuni.cz/~shrb5163.

